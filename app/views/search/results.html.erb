<%= content_for(:title, results_page_title(@enhanced_query)) %>

<% content_for :additional_meta_tag do %>
  <meta name="robots" content="noindex, nofollow" />
<% end %>

<div id="content-wrapper" class="space-wrap">
  <%= render(partial: 'shared/error', collection: @errors) %>

  <%= render(partial: 'trigger_tacos') if tacos_enabled? %>

  <%= turbo_frame_tag "search-results", data: { turbo_action: "advance" } do %>
    <div class="layout-3q1q layout-band">
      <main id="results" class="col3q wrap-results">
        <% if @show_primo_continuation %>
          <%= render partial: 'search/primo_continuation' %>
        <% elsif @results.present? && @errors.blank? %>
          <h2 class="results-context"><%= results_summary(@pagination[:hits]) %></h2>
          <p class="results-context-description">From all MIT Libraries sources</p>
          <ol class="results-list" start="<%= @pagination[:start] %>">
            <% case @active_tab %>
            <% when 'primo' %>
              <%= render(partial: 'search/result_primo', collection: @results, as: :result) %>
            <% when 'timdex' %>
              <%= render(partial: 'search/result', collection: @results, as: :result) %>
            <% end %>
          </ol>
          <% if @results.present? %>
            <div id="pagination">  
              <%= render partial: "pagination" %>
            </div>
            <%= render partial: 'shared/ask', locals: { display: 'view-md' } %>
          <% end %>          
        <% elsif @errors.blank? %>
          <div class="no-results">
            <p class="hd-2">No results found for your search</p>
          </div>
        <% end %>
      </main>
    </div>
  <% end %>

  <%= render partial: 'shared/ask', locals: { display: 'aside' } if @results.blank? %>
</div>

<%= javascript_include_tag "filters" %>
